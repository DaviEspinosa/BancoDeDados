
CREATE TABLE PEDIDOS (
    ID_PEDIDO INT PRIMARY KEY,
    ID_CLIENTES INT,
    STATUS VARCHAR(50),
    ID_FUNCIONARIO INT
);

CREATE TABLE PIZZAS (
    ID_PIZZA SERIAL PRIMARY KEY,
    NOME VARCHAR(100),
    INGREDEIENTE VARCHAR(500)
);
-- Tabela de PEDIDO_ITEM
CREATE TABLE PEDIDO_ITEM (
    ID_ITEM INT PRIMARY KEY,
    ID_PEDIDO INT,
    ID_PIZZA INT,
    FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDO(ID_PEDIDO),
    FOREIGN KEY (ID_PIZZA) REFERENCES PIZZA(ID_PIZZA)
);

-- Tabela de CLIENTE
CREATE TABLE CLIENTE (
    ID_CLIENTE INT PRIMARY KEY,
    NOME VARCHAR(100),
    endereco VARCHAR(200)
);

-- Tabela de Funcionários
CREATE TABLE FUNCIONARIO (
    ID_FUNCIONARIO INT PRIMARY KEY,
    NOME VARCHAR(100),
    SETOR VARCHAR(100)
);
-- Tabela de ENTREGA
CREATE TABLE ENTREGA (
    ID_PEDIDO INT PRIMARY KEY,
    ENDERECO VARCHAR(200),
    FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDO(ID_PEDIDO)
);

ALTER TABLE PIZZA ADD COLUMN
VALOR DECIMAL(10,2);

UPDATE PIZZA SET VALOR = 34.00 WHERE ID_PIZZA = 1
UPDATE PIZZA SET VALOR = 150.00 WHERE ID_PIZZA = 2
UPDATE PIZZA SET VALOR = 260.95 WHERE ID_PIZZA = 3
UPDATE PIZZA SET VALOR = 70.00 WHERE ID_PIZZA = 4



ALTER TABLE FUNCIONARIO ADD COLUMN

GERENTE VARCHAR(100);

UPDATE FUNCIONARIO SET GERENTE = 'DAVI' WHERE ID_FUNCIONARIO = 1
UPDATE FUNCIONARIO SET GERENTE = 'EDUARDO' WHERE ID_FUNCIONARIO = 2
UPDATE FUNCIONARIO SET GERENTE = 'PAIVA' WHERE ID_FUNCIONARIO = 3
UPDATE FUNCIONARIO SET GERENTE = 'ALBERTO' WHERE ID_FUNCIONARIO = 4



-- Inserção de dados na tabela PEDIDO
INSERT INTO PEDIDO (ID_PEDIDO, ID_CLIENTE, STATUS, ID_FUNCIONARIO) VALUES
(1, 1, 'Pendente', 1),
(2, 2, 'Em andamento', 2),
(3, 3, 'Concluído', NULL);

-- Inserção de dados na tabela PIZZA
INSERT INTO PIZZA (ID_PIZZA, NOME, ingredientes) VALUES
(1, 'Margherita', 'Molho de tomate, mussarela, manjericão'),
(2, 'Pepperoni', 'Molho de tomate, pepperoni, queijo'),
(3, 'Vegetariana', 'Molho de tomate, pimentão, cebola, cogumelos'),
(4, 'Frango BBQ', 'Molho de tomate, frango desfiado, cebola roxa, molho BBQ');

-- Inserção de dados na tabela PEDIDO_ITEM
INSERT INTO PEDIDO_ITEM (ID_ITEM, ID_PEDIDO, ID_PIZZA) VALUES
(1, 1, 1),
(2, 1, 3),
(3, 2, 2),
(4, 3, 1),
(5, 3, 4);

-- Inserção de dados na tabela CLIENTE
INSERT INTO CLIENTE (ID_CLIENTE, NOME, endereco) VALUES
(1, 'Maria', 'Rua A, 123'),
(2, 'João', 'Av. B, 456'),
(3, 'Ana', 'Travessa C, 789');

-- Inserção de dados na tabela Funcionários
INSERT INTO FUNCIONARIO (ID_FUNCIONARIO, NOME, SETOR) VALUES
(1, 'Pedro', 'Atendente'),
(2, 'Sofia', 'Entregador'),
(3, 'Lucas', 'Cozinheiro');


-- Inserção de dados na tabela ENTREGA
INSERT INTO ENTREGA (ID_PEDIDO, ENDERECO) VALUES
(2, 'Rua X, 789'),
(3, 'Av. Y, 1010');

--Atividade

--1
SELECT PEDIDO.ID_PEDIDO, CLIENTE.NOME AS CLIENTE, CLIENTE.endereco AS ENDERECO
FROM PEDIDO
INNER JOIN CLIENTE ON PEDIDO.ID_CLIENTE = CLIENTE.ID_CLIENTE;

--2
SELECT PEDIDO_ITEM.ID_ITEM, PIZZA.NOME AS PIZZA, PIZZA.ingredientes
FROM PEDIDO_ITEM
INNER JOIN PIZZA ON PEDIDO_ITEM.ID_PIZZA = PIZZA.ID_PIZZA;

--3
SELECT FUNCIONARIO.NOME AS FUNCIONARIO, FUNCIONARIO.SETOR
FROM FUNCIONARIO;

--4
SELECT PEDIDO.ID_PEDIDO, PEDIDO.STATUS, FUNCIONARIO.NOME AS FUNCIONARIO 
FROM PEDIDO
INNER JOIN FUNCIONARIO ON PEDIDO.ID_FUNCIONARIO = FUNCIONARIO.ID_FUNCIONARIO;

--5
SELECT CLIENTE.NOME, PEDIDO.ID_PEDIDO AS ITEM, PEDIDO.STATUS 
FROM CLIENTE
LEFT JOIN PEDIDO ON CLIENTE.ID_CLIENTE = PEDIDO.ID_CLIENTE;

--6
SELECT PIZZA.NOME AS PIZZA, PIZZA.ingredientes
FROM PIZZA;

--7
SELECT PEDIDO.ID_PEDIDO, ENTREGA.ENDERECO
FROM PEDIDO
LEFT JOIN ENTREGA ON PEDIDO.ID_PEDIDO = ENTREGA.ID_PEDIDO;

--8
SELECT FUNCIONARIO.NOME, FUNCIONARIO.GERENTE 
FROM FUNCIONARIO;

--9
SELECT PEDIDO.ID_PEDIDO, PIZZA.TAMANHO 
FROM PEDIDO
INNER JOIN PIZZA ON PEDIDO.ID_PIZZA = PIZZA.ID_PIZZA;

--10
SELECT PIZZA.NOME AS PIZZA, PIZZA.VALOR * (1 - 0.8) AS 'VALOR COM DESCONTO'
FROM PIZZA;










------------------------ LISTA DOIS------------------------------

--1
SELECT CLIENTE.NOME, PEDIDO.ID_PEDIDO FROM 
PEDIDO INNER JOIN CLIENTE ON PEDIDO.ID_CLIENTE = CLIENTE.ID_CLIENTE;
--2
SELECT * FROM PEDIDO WHERE data_pedido between '2024-01-01' and '2024-04-19';

--3
SELECT * FROM itens_pedido WHERE id_item_pedido = 1;

--4
SELECT cliente_id, SUM(total) AS total_gasto FROM PEDIDO WHERE cliente_id = 2 GROUP BY cliente_id;

--5
SELECT SABOR, count(*) AS TOTAL_PEDIDOS FROM itens_pedido WHERE TIPO = 'pizza' GROUP BY SABOR ORDER BY TOTAL_PEDIDOS desc;

--6
SELECT * FROM CARDAPIO WHERE TIPO = 'pizza' and SABOR = 'Calabresa';

--7
SELECT * FROM FUNCIONARIO;

--8
SELECT * FROM HORARIO;

--9
SELECT * FROM PEDIDO WHERE status = 'em andamento';
